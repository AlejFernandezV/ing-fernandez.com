---
import ClipBoardIcon from "./icons/ClipBoard.astro";
import MailIcon from "@/components/icons/Mail.astro";
---
<div class="hover:bg-gray-900 hover:border-gray-700 hover:text-white inline-flex items-center justify-center gap-2 px-4 py-1 text-gray-800 transition bg-gray-100 border border-gray-300 rounded-full dark:bg-gray-800 dark:border-gray-600 dark:text-white focus-visible:ring-yellow-500/80 text-md group max-w-fit focus:outline-none focus-visible:outline-none focus-visible:ring focus-visible:ring-white focus-visible:ring-offset-2 active:bg-black relative">
    <!-- Lado izquierdo con icono y etiqueta -->
    <div>
        <a
            {...Astro.props}
            target="_blank"
            rel="noopener noreferrer"
            role="link"
            class="flex items-center gap-1 rounded-full px-2 py-1"
            href="mailto:alejfernandezv@gmail.com"
        >
            <MailIcon class="h-4 w-4" />
            Contáctame
        </a>
    </div>
    <!-- Linea divisora -->
    <div class="h-full border-l border-gray-300 mx-"></div>
    <!-- Lado derecho con botón de clipboard -->
    <div class="relative">
        <button id="copiar-correo" class="flex items-center focus:outline-none px-2 py-1">
            <ClipBoardIcon class="h-6 w-6 text-black" />
        </button>
        <!-- Recuadro que indica copia al portapapeles -->
        <div id="copiado" class="absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-900 dark:bg-white text-white dark:text-black px-2 py-1 rounded-md opacity-0 transition duration-300">
            Copiado al portapapeles
        </div>
    </div>
</div>

<script>
document.getElementById("copiar-correo")?.addEventListener("click", function() {
    const copyToClipboard = () => {
        navigator.clipboard.writeText("alejfernandezv@gmail.com").then(() => {
            // Mostrar el recuadro de copia al portapapeles
            const copiadoDiv = document.getElementById("copiado");
            copiadoDiv?.classList.add("opacity-100");
            setTimeout(() => {
                copiadoDiv?.classList.remove("opacity-100");
            }, 2000); // Después de 2 segundos, ocultar el recuadro
        }).catch(err => {
            console.error("Error al copiar al portapapeles:", err);
        });
    };

    copyToClipboard();
});
</script>